<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Medi Inventory</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
*{box-sizing:border-box;font-family:'Poppins',sans-serif}

body{
    min-height:100vh;
    background:linear-gradient(135deg,#141e30,#243b55);
    padding:40px;
    color:#fff;
}

.card{
    max-width:1000px;
    margin:auto;
    background:rgba(255,255,255,0.12);
    backdrop-filter:blur(18px);
    border-radius:20px;
    padding:30px;
    box-shadow:0 25px 50px rgba(0,0,0,.4);
}

.header{text-align:center;margin-bottom:25px}
.header h1{font-weight:600}
.header p{font-size:14px;opacity:.85}

.form-grid{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:20px;
    margin-bottom:20px;
}

input{
    padding:12px 14px;
    border-radius:10px;
    border:none;
    font-size:14px;
}

button{
    padding:14px;
    border:none;
    border-radius:12px;
    background:linear-gradient(135deg,#00c6ff,#0072ff);
    color:#fff;
    font-size:15px;
    cursor:pointer;
}

.download-btn{
    background:linear-gradient(135deg,#43cea2,#185a9d);
    margin-bottom:20px;
}

table{
    width:100%;
    border-collapse:collapse;
    border-radius:15px;
    overflow:hidden;
}

th,td{
    padding:14px;
    text-align:center;
    font-size:13px;
}

thead{background:rgba(255,255,255,.25)}
tbody tr{background:rgba(255,255,255,.1)}

.total{
    text-align:right;
    margin-top:15px;
    font-weight:500;
}

.footer{
    text-align:center;
    font-size:12px;
    margin-top:25px;
    opacity:.7;
}
</style>
</head>

<body>

<div class="card">
    <div class="header">
        <h1>Medi Inventory</h1>
        <p>Professional Medical Record Keeping System</p>
    </div>

    <!-- FORM -->
    <form id="recordForm" class="form-grid">
        <input id="medicineName" placeholder="Medicine Name" required>
        <input id="batchNo" placeholder="Batch Number" required>
        <input id="price" type="number" placeholder="Price (₹)" required>
        <input id="quantity" type="number" placeholder="Quantity Sold" required>
        <button type="submit" style="grid-column:span 2">Add Record</button>
    </form>

    <button class="download-btn" onclick="downloadPDF()">Download Daily Sales Report (A4 PDF)</button>

    <!-- TABLE -->
    <table>
        <thead>
            <tr>
                <th>Medicine</th>
                <th>Batch</th>
                <th>Price</th>
                <th>Qty</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>

    <div class="total" id="totalSales">Total Sales: ₹0</div>

    <div class="footer">
        Offline • Secure • Medicine Records Keeping Project
    </div>
</div>

<script>
let records = [];
let grandTotal = 0;

const form = document.getElementById("recordForm");
const tableBody = document.getElementById("tableBody");
const totalSalesDiv = document.getElementById("totalSales");

form.addEventListener("submit", function(e){
    e.preventDefault();

    const name = document.getElementById("medicineName").value;
    const batch = document.getElementById("batchNo").value;
    const price = Number(document.getElementById("price").value);
    const qty = Number(document.getElementById("quantity").value);

    const total = price * qty;

    records.push({name, batch, price, qty, total});
    grandTotal += total;

    renderTable();
    form.reset();
});

function renderTable(){
    tableBody.innerHTML = "";

    records.forEach(r=>{
        const row = document.createElement("tr");
        row.innerHTML = `
            <td>${r.name}</td>
            <td>${r.batch}</td>
            <td>₹${r.price}</td>
            <td>${r.qty}</td>
            <td>₹${r.total}</td>
        `;
        tableBody.appendChild(row);
    });

    totalSalesDiv.innerText = "Total Sales: ₹" + grandTotal;
}

function downloadPDF(){
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF("p","mm","a4");

    doc.setFont("helvetica","bold");
    doc.setFontSize(16);
    doc.text("Medi Inventory – Daily Sales Report",105,15,{align:"center"});

    doc.setFontSize(10);
    doc.setFont("helvetica","normal");
    doc.text("Date: " + new Date().toLocaleDateString(),15,25);

    let y = 35;
    doc.setFont("helvetica","bold");
    doc.text("Medicine",15,y);
    doc.text("Batch",55,y);
    doc.text("Price",90,y);
    doc.text("Qty",115,y);
    doc.text("Total",145,y);

    doc.setFont("helvetica","normal");
    y += 8;

    records.forEach(r=>{
        doc.text(r.name,15,y);
        doc.text(r.batch,55,y);
        doc.text("Rs"+r.price,90,y);
        doc.text(String(r.qty),115,y);
        doc.text("Rs"+r.total,145,y);
        y += 7;
        if(y > 280){
            doc.addPage();
            y = 20;
        }
    });

    doc.setFont("helvetica","bold");
    doc.text("Grand Total: Rs" + grandTotal,15,y+10);

    doc.save("Medi_Inventory_Report.pdf");
}
</script>

</body>
</html>
